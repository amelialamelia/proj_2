{% extends "main.html" %}

{% block scripts %}
<script>
    if (performance.navigation.type === 1) {
        window.location.href = "/";
    }
    let map = L.map('map').setView([52.0, 19.0], 6);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    let stations = document.getElementById("data-container").getAttribute("data-station-data");
    let stations_json = JSON.parse(stations);
    
    jQuery.each(stations_json, function(i, val) {
        let marker = L.marker([val.lat, val.lng]).addTo(map);
        popupContent = `
            <b>Typ stacji: ${val.type}</b><br>
            <b>Lokalizacja: ${val.name}</b><br>
            <b>Data założenia: ${val.activitype}</b><br>
        `;
        marker.bindPopup(popupContent);
    });
</script>
{% endblock scripts%}